# –§–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥ –∏ —Ä–µ–∂–∏–º Duo

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–æ–ª–æ–º

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í—ã–±–æ—Ä –ø–æ–ª–∞ (–ú—É–∂—á–∏–Ω–∞ / –ñ–µ–Ω—â–∏–Ω–∞) –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, –ø–æ–∫–∞ –ø–æ–ª –Ω–µ –≤—ã–±—Ä–∞–Ω
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ `gender` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `profiles` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Google/Apple/Telegram –∏ —É –Ω–µ–≥–æ –Ω–µ —É–∫–∞–∑–∞–Ω –ø–æ–ª, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ (`CompleteProfileScreen`)
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –∫–∞—Ä—Ç–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- –î–≤–µ –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞: "–ú—É–∂—á–∏–Ω–∞" / "–ñ–µ–Ω—â–∏–Ω–∞"
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ–ª–∞ (–ø–æ–¥—Å–≤–µ—Ç–∫–∞)
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –ø–æ–ª –Ω–µ –≤—ã–±—Ä–∞–Ω
- –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –¥–æ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞

**–ö–æ–¥:**
```typescript
// src/components/AuthScreen.tsx
{mode === 'register' && (
  <div>
    <label>–ü–æ–ª <span className="text-red-400">*</span></label>
    <div className="grid grid-cols-2 gap-2">
      <button onClick={() => setGender('male')}>–ú—É–∂—á–∏–Ω–∞</button>
      <button onClick={() => setGender('female')}>–ñ–µ–Ω—â–∏–Ω–∞</button>
    </div>
  </div>
)}

<button
  type="submit"
  disabled={isLoading || (mode === 'register' && !gender)}
>
  –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
</button>
```

### 2. –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ (OAuth)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°—Ç–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" –∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Apple" –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Ö–æ–¥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `supabase.auth.signInWithOAuth` —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ `google` –∏ `apple`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–≤–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram —á–µ—Ä–µ–∑ `window.Telegram.WebApp.initDataUnsafe.user`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ `onAuthStateChange`

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- –ö–Ω–æ–ø–∫–∞ Google: –±–µ–ª—ã–π —Ñ–æ–Ω —Å –∏–∫–æ–Ω–∫–æ–π Google
- –ö–Ω–æ–ø–∫–∞ Apple: —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω —Å –∏–∫–æ–Ω–∫–æ–π Apple
- –ö–Ω–æ–ø–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø–æ—Å–ª–µ —Ñ–æ—Ä–º—ã Email/Password
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å "–ò–ª–∏ –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑"

**–ö–æ–¥:**
```typescript
// src/components/AuthScreen.tsx
<button
  onClick={async () => {
    const result = await signInWithGoogle();
    // OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  }}
  className="w-full bg-white hover:bg-white/90 py-3 rounded-xl"
>
  <svg>...</svg>
  <span>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</span>
</button>

<button
  onClick={async () => {
    const result = await signInWithApple();
    // OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  }}
  className="w-full bg-black hover:bg-gray-900 py-3 rounded-xl"
>
  <svg>...</svg>
  <span>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Apple</span>
</button>
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram:**
```typescript
// src/components/AuthScreen.tsx
useEffect(() => {
  if (isTelegramMiniApp) {
    const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user;
    if (tgUser?.id) {
      handleTelegramLogin(tgUser);
    }
  }
}, [isTelegramMiniApp]);
```

### 3. –†–µ–∂–∏–º Duo (–¢–µ—Ç-–∞-—Ç–µ—Ç)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ñ–µ—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∫—Ä—É–≥–∞ –ø–∞–ª—å—Ü–µ–º + —Ç–∞–ø –≤ —Ü–µ–Ω—Ç—Ä –¥–ª—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤
- ‚úÖ –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –ª—é–±–æ–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –∏–º–µ–µ—Ç —Ñ–ª–∞–≥ `is_duo_event: true`
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: –ª—é–±–æ–π –ø–æ–ª –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å, –Ω–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏—Ö —Å–∫—Ä—ã—Ç–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø—Ä–∏—ë–º –¥—Ä—É–≥–∏—Ö –∑–∞—è–≤–æ–∫ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `CircleGestureDetector` —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫—Ä—É–≥–æ–≤–æ–π –∂–µ—Å—Ç
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫—Ä—É–≥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä –∫—Ä—É–≥–∞
- –¢–∞–ø –≤ —Ü–µ–Ω—Ç—Ä –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ä–µ–∂–∏–º Duo
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤ (3D –∞–Ω–∏–º–∞—Ü–∏—è)
- –§–æ–Ω –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ —Ç–µ–º–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

**–°–æ–∑–¥–∞–Ω–∏–µ Duo-—Å–æ–±—ã—Ç–∏—è:**
```typescript
// src/App.tsx
const isDuoEvent = isDuoMode; // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω —Ä–µ–∂–∏–º Duo, —Å–æ–±—ã—Ç–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è Duo-—Å–æ–±—ã—Ç–∏–µ–º

const { data, error } = await supabase
  .from('impulses')
  .insert({
    content: messageContent.trim(),
    category: categoryIdForDB,
    creator_id: userId, // UUID
    is_duo_event: isDuoEvent, // true –µ—Å–ª–∏ –≤ —Ä–µ–∂–∏–º–µ Duo
    // ...
  });
```

**–õ–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:**
- –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ Duo-—Å–æ–±—ã—Ç–∏–∏
- –ó–∞–ø—Ä–æ—Å—ã –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é —Å–æ–±—ã—Ç–∏—è
- –°–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø–æ –ø–æ–ª—É (male/female/all)
- –°–æ–∑–¥–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ UUID

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è UUID –∏—Å–ø–æ–ª—å–∑—É—é—Ç `String()` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ –ø–æ–ª—è `creator_id`, `user_id`, `selected_participant_id` —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ `string` (UUID)
- ‚úÖ –ü—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ UUID –≤ —É—Å–ª–æ–≤–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `String(id1) === String(id2)`
- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ UUID –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É —è–≤–Ω–æ–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞:**
```typescript
// src/lib/duoEvents.ts
// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ UUID (—Å—Ç—Ä–æ–∫–∏): –ø—Ä–∏–≤–æ–¥–∏–º –∫ —Å—Ç—Ä–æ–∫–∞–º –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
if (String(event.creator_id) === String(userId)) {
  return { success: false, error: 'You are the creator of this event' };
}

// src/App.tsx
// –°—Ä–∞–≤–Ω–µ–Ω–∏–µ UUID (—Å—Ç—Ä–æ–∫–∏): –ø—Ä–∏–≤–æ–¥–∏–º –∫ —Å—Ç—Ä–æ–∫–∞–º –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
const isCreator = String(selectedEventDetail.creator_id) === String(currentUserId);

const friendProfile = String(friendship.user_id) === String(currentUserId)
  ? friendship.profiles_friend 
  : friendship.profiles_user;

// src/components/DuoEventRequestsManager.tsx
const selectedRequest = requests.find(r => String(r.user_id) === String(selectedParticipantId));
```

## üìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/components/CompleteProfileScreen.tsx` - –≠–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
- ‚úÖ `supabase/migrations/005_oauth_providers.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è OAuth

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/lib/auth-universal.ts` - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ OAuth (`signInWithGoogle`, `signInWithApple`), `updateUserGender()`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∞ –≤ `getCurrentUser()`
- ‚úÖ `src/components/AuthScreen.tsx` - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ–ª–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∫–Ω–æ–ø–∫–∏ OAuth, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ `src/App.tsx` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ, —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤, —Ä–µ–∂–∏–º Duo —Å –∂–µ—Å—Ç–∫–∏–º –∞–∫—Ç–∏–≤–∞—Ç–æ—Ä–æ–º
- ‚úÖ `src/lib/duoEvents.ts` - –í—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è UUID –∏—Å–ø–æ–ª—å–∑—É—é—Ç `String()` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ `src/components/DuoEventRequestsManager.tsx` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ UUID –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `String()`
- ‚úÖ `src/components/CircleGestureDetector.tsx` - –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–∂–µ—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞ Duo)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### Google OAuth

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console:**
   - https://console.cloud.google.com
   - –°–æ–∑–¥–∞–π—Ç–µ OAuth 2.0 credentials
   - –î–æ–±–∞–≤—å—Ç–µ Authorized redirect URIs: `https://[your-project-ref].supabase.co/auth/v1/callback`

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Supabase:**
   - Supabase Dashboard ‚Üí Authentication ‚Üí Providers ‚Üí Google
   - –í—Å—Ç–∞–≤—å—Ç–µ Client ID –∏ Client Secret
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### Apple OAuth

1. **–°–æ–∑–¥–∞–π—Ç–µ App ID –∏ Service ID –≤ Apple Developer:**
   - https://developer.apple.com
   - –°–æ–∑–¥–∞–π—Ç–µ Services ID
   - –î–æ–±–∞–≤—å—Ç–µ Return URLs: `https://[your-project-ref].supabase.co/auth/v1/callback`

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ Supabase:**
   - Supabase Dashboard ‚Üí Authentication ‚Üí Providers ‚Üí Apple
   - –í—Å—Ç–∞–≤—å—Ç–µ Services ID, Team ID, Key ID, Private Key
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –ø–æ–ª–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –í–≤–µ–¥–∏—Ç–µ Email, –ü–∞—Ä–æ–ª—å, –ò–º—è
3. **–ù–µ –≤—ã–±–∏—Ä–∞–π—Ç–µ –ø–æ–ª** ‚Üí ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
4. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª** (–ú—É–∂—á–∏–Ω–∞ –∏–ª–∏ –ñ–µ–Ω—â–∏–Ω–∞) ‚Üí ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" ‚Üí ‚úÖ –î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î, —á—Ç–æ `gender` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ç–∞–±–ª–∏—Ü–µ `profiles`

### –¢–µ—Å—Ç 2: OAuth –≤—Ö–æ–¥ (Google/Apple)

1. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" –∏–ª–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Apple"
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
3. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. ‚úÖ –ï—Å–ª–∏ `gender === null`, –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª –∏ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
6. ‚úÖ –î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –¢–µ—Å—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Mini App

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram Mini App
2. ‚úÖ –î–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
3. ‚úÖ –ï—Å–ª–∏ `gender === null`, –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
4. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –¢–µ—Å—Ç 4: –†–µ–∂–∏–º Duo (–∂–µ—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)

1. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Ä–∏—Å—É–π—Ç–µ –∫—Ä—É–≥ –ø–∞–ª—å—Ü–µ–º
2. ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ª–∏–Ω–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
3. ‚úÖ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫—Ä—É–≥–∞ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ü–µ–Ω—Ç—Ä –∫—Ä—É–≥–∞
4. ‚úÖ –ù–∞–∂–º–∏—Ç–µ –≤ —Ü–µ–Ω—Ç—Ä –∫—Ä—É–≥–∞
5. ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ 180 –≥—Ä–∞–¥—É—Å–æ–≤
6. ‚úÖ –§–æ–Ω –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ —Ç–µ–º–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç

### –¢–µ—Å—Ç 5: –°–æ–∑–¥–∞–Ω–∏–µ Duo-—Å–æ–±—ã—Ç–∏—è

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ä–µ–∂–∏–º Duo (–∂–µ—Å—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏)
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ (–≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –æ–ø–∏—Å–∞–Ω–∏–µ, –º–µ—Å—Ç–æ)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î, —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–æ —Å `is_duo_event: true`
4. ‚úÖ –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–µ, –Ω–æ –Ω–µ —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–µ—Å—Ç 6: –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ Duo-—Å–æ–±—ã—Ç–∏–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A —Å–æ–∑–¥–∞–µ—Ç Duo-—Å–æ–±—ã—Ç–∏–µ
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —É—á–∞—Å—Ç–∏–µ
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
4. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –≤–∏–¥–∏—Ç –æ–±–∞ –∑–∞–ø—Ä–æ—Å–∞ (—Å–∫—Ä—ã—Ç–Ω–æ)
5. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –∏ C –Ω–µ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
6. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B
7. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å C –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
8. ‚úÖ –ù–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è

### –¢–µ—Å—Ç 7: –¢–∏–ø—ã UUID

1. –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ Email —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google OAuth
3. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram Mini App
4. ‚úÖ –í—Å–µ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ UUID –∏–∑ Supabase Auth
5. ‚úÖ –í—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è UUID –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–±–µ–∑ –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤)

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–æ–ª–æ–º
- ‚úÖ –ö–Ω–æ–ø–∫–∏ OAuth (Google, Apple)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Mini App
- ‚úÖ –†–µ–∂–∏–º Duo —Å –∂–µ—Å—Ç–∫–∏–º –∞–∫—Ç–∏–≤–∞—Ç–æ—Ä–æ–º (–∫—Ä—É–≥ + —Ç–∞–ø)
- ‚úÖ Duo-—Å–æ–±—ã—Ç–∏—è —Å –ª–æ–≥–∏–∫–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ UUID (–≤—Å–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç String())

**–ü—Ä–∏–º–µ–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ Supabase Dashboard –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è!**
